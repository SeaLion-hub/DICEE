# ADR 001: Notice 일정 스키마 (A vs B)

**상태**: 확정 전 (3단계 DB 스키마 확정 시 선택 적용)  
**결정 시점**: 3단계 DB 스키마·데이터 적재 로직 확정 전

---

## 배경

Notice 테이블에 공지별 일정(마감일, 행사일 등)을 어떻게 저장할지 4·5·6단계 달력 API·AI 출력과 맞춰야 함. 3단계에서 공지를 upsert하는 DB 구조·크롤러 매핑이 이 스키마에 묶이므로, **4단계 직전이 아니라 3단계 마무리 전에 반드시 확정**해야 마이그레이션·적재 로직 재작업을 피할 수 있음.

현재 DB(005 기준): `dates`, `eligibility`(JSONB), `images`, `attachments` 존재. `deadline`, `event_start`, `event_end`, `event_title`, `poster_image_url`은 005에서 제거된 상태.

---

## 선택지

### (A) deadline/event_* 컬럼 복원 (DateTime 컬럼형)

- Notice에 **deadline**, **event_start**, **event_end**, **event_title** (DateTime) 컬럼 사용.
- **장점**: 인덱스 활용·날짜 필터 쿼리 단순. 데이터 증가 시에도 달력 API 성능 유지.
- **단점**: 컬럼 추가·마이그레이션 필요.
- **권장**: 달력/일정 검색이 핵심이면 (A) 권장.

### (B) dates(JSONB) 유지

- 현재 005 기준 **dates**, **eligibility**(JSONB) 유지. 일정은 JSONB 배열 내 구조로 저장.
- **장점**: 스키마 변경 최소.
- **단점**: JSONB 배열 내 날짜 조건 쿼리 복잡·데이터 증가 시 달력 API 병목 가능.

---

## 결정 결과 (로드맵 반영 시)

로드맵 본문에는 **결과만** 기입. 예: "3단계: 일정 스키마 **A(DateTime 컬럼형)** 적용" 또는 "3단계: 일정 스키마 **B(dates JSONB 유지)** 적용".  
결정 후 3단계 마이그레이션·크롤러 매핑·4·5·6 할 일 일괄 적용.

---

## 참고

- ROADMAP: [미리 결정 필요 — 일정 스키마 (A vs B)](../ROADMAP.md#일정-스키마-a-vs-b-단일-참조) (요약 링크)
- 4·5·6단계 "할 일"은 위에서 **결정된 스키마**를 전제로 구현.
